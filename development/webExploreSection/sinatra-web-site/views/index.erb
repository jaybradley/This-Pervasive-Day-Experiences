<html>
    <head>
        <title>This Pervasive Day</title>

        <script src="javascript/video.js" type="text/javascript" charset="utf-8"></script>
        <link rel="stylesheet" href="css/video-js.css" type="text/css" media="screen" title="Video JS" charset="utf-8">
        
        <link type="text/css" href="css/smoothness/jquery-ui-1.8.6.custom.css" rel="Stylesheet"/>        
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>

    </head>
    <body>

        <!-- Use VideoJS http://videojs.com -->
        <div id="video-js-box">
        </div>

        <!-- User feedback forms -->
        <div id="user_feedback">
        </div>

    </body>
    
    
    <script type="text/javascript" charset="utf-8">
        var video_player;
        
        $(document).ready(function(){
            current_video_index = 0;
            nextVideo();  
        });
        
        function nextVideo() {
            //alert("nextVideo");
            
            $.get('next_video', {current_video_index: current_video_index}, function(data) {
                $('#video-js-box').html(data);
                //$('#video-js-box').empty().append(data);
                
                video_player = VideoJS.setup("the_video");
                video_player.play();
               
                // make a call to get the next bit of script from the server and then automatically execute it when it comes back
                $.ajax({
                  url: 'next_question',
                  dataType: 'script',
                  cache: false,
                  data: {current_video_index: current_video_index},
                  success: function() {} // don't need to do anything on success as the script is automatically run
                });
            });
            
            
        }
        
    
        
        
    </script>
</html>
